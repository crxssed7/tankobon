{% extends 'base.html' %}

{% block title %}{{ manga.name }} - Tank≈çbon{% endblock %}

{% block content %}

<style>
    .badge {
        margin-right: 10px !important;
    }
    
    .badge-anilist {
        background-color: rgb(11,22,34) !important;
    }
    
    .badge-mal {
        background-color: rgb(46,81,162) !important;
    }
    
    .badge-mangaupdates {
        background-color: rgb(82,102,124) !important;
    }
    
    .badge-anime-planet {
        background-color: rgb(252,83,66) !important;
    }
    
    .badge-kitsu {
        background-color: rgb(72,48,72) !important;
    }
    
    .badge-section {
        display: flex;
        flex-wrap: wrap;
    }
</style>

<div class="feature">
    {% if manga.poster %}
    <div>
        <center><img src="{{ manga.poster }}" alt="Poster" class="poster" width="150"></center>
    </div>
    <br>
    {% endif %}
    <h1>
        {{ manga.name }}
    </h1>
    <p class="text-muted">{{ manga.romaji }}</p>
</div>

<div class="container section">
    <div class="row">
        <div class="col-sm-6">
            {% if manga.banner %}
            <img src="{{ manga.banner }}" alt="banner" class="poster" width="100%">
            <br>
            <br>
            {% endif %}
            <div class="card mb-3" style="max-width: auto; height: auto;">
                <div class="card-header">Info</div>
                <div class="card-body text-dark">
                    {{ manga.description }}
                    <hr>
                    <b>Volumes: </b> {{ manga.volume_count }}
                    <hr>
                    <b>Status: </b> {{ manga.status }}
                    <hr>
                    <b>Start Date: </b> {{ manga.start_date }}
                    {% if manga.magazine %}
                    <hr>
                    <b>Magazine: </b> {{ manga.magazine }}
                    {% endif %}
                    <hr>
                    <div class="badge-section">
                        {% if manga.anilist_id %}
                        <a href="https://anilist.co/manga/{{ manga.anilist_id }}"><h5><span class="badge badge-anilist">AniList</span></h5></a>
                        {% endif %}
                        {% if manga.mal_id %}
                        <a href="https://myanimelist.net/manga/{{ manga.mal_id }}"><h5><span class="badge badge-mal">MAL</span></h5></a>
                        {% endif %}
                        {% if manga.mangaupdates_id %}
                        <a href="https://www.mangaupdates.com/series.html?id={{ manga.mangaupdates_id }}"><h5><span class="badge badge-mangaupdates">MangaUpdates</span></h5></a>
                        {% endif %}
                        {% if manga.anime_planet_slug %}
                        <a href="https://www.anime-planet.com/manga/{{ manga.anime_planet_slug }}"><h5><span class="badge badge-anime-planet">Anime Planet</span></h5></a>
                        {% endif %}
                        {% if manga.kitsu_id %}
                        <a href="https://kitsu.io/manga/{{ manga.kitsu_id }}"><h5><span class="badge badge-kitsu">Kitsu</span></h5></a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            {% if data %}
            {% for i in data %}
            <details>
                <summary>Volume {{ i.volume }}</summary>
                <ul>
                    {% for chapter in i.chapters %}
                    {% if chapter.name %}
                    <li class="chapter-li">Chapter {{ chapter.chapter_number }} - {{ chapter.name }}</li>
                    {% else %}
                    <li class="chapter-li">Chapter {{ chapter.chapter_number }}</li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </details>
            {% endfor%}
            {% else %}
            <div class="card mb-3" style="max-width: auto; height: auto;">
                <div class="card-header">There are no volumes yet.</div>
            </div>
            {% endif %}
            {% if chapters_nonvolumed %}
            <details>
                <summary>No volume</summary>
                <ul>
                    {% for c in chapters_nonvolumed %}
                    {% if c.name %}
                    <li class="chapter-li">Chapter {{ c.chapter_number }} - {{ c.name }}</li>
                    {% else %}
                    <li class="chapter-li">Chapter {{ c.chapter_number }}</li>
                    {% endif %}
                    {% endfor %}
                </ul>
                <div class="section">
                    <h5>Why do these chapters have no volume?</h5>
                    <p>This is because (for {{ manga.name }}) when a chapter is released, they aren't immediately put into volumes.</p>
                </div>
            </details>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}